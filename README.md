
<!-- README.md is generated from README.Rmd. Please edit that file -->

# PFSC

<!-- badges: start -->
<!-- badges: end -->

The PFSC package provides functions to simulate the remainder of
prematurely stopped soccer leagues. It calculates for each team the
probabilities to reach each position in the final league table.

## Installation

You can install this package from [GitHub](https://github.com/) with:

``` r
# install.packages("devtools")
devtools::install_github("vaneetvelde/PFSC")
```

## Example

We give the example of the stopped season of the French first ligue in
2019-2020.

``` r
library(PFSC)
results<-read.csv("https://www.football-data.co.uk/mmz4281/1920/F1.csv")
results<-results[,4:7]
colnames(results)<-c("home_team","away_team","home_score","away_score")

# The intermediate league table
table1<-league_table(results)
table1
#>           team  M  W  D  L GS GC  GD  P
#> 1     Paris SG 27 22  2  3 75 24  51 68
#> 2    Marseille 28 16  8  4 41 29  12 56
#> 3       Rennes 28 15  5  8 38 24  14 50
#> 4        Lille 28 15  4  9 35 27   8 49
#> 5        Reims 28 10 11  7 26 21   5 41
#> 6         Nice 28 11  8  9 41 38   3 41
#> 7         Lyon 28 11  7 10 42 27  15 40
#> 8  Montpellier 28 11  7 10 35 34   1 40
#> 9       Monaco 28 11  7 10 44 44   0 40
#> 10      Angers 28 11  6 11 28 33  -5 39
#> 11  Strasbourg 27 11  5 11 32 32   0 38
#> 12    Bordeaux 28  9 10  9 40 34   6 37
#> 13      Nantes 28 11  4 13 28 31  -3 37
#> 14       Brest 28  8 10 10 34 37  -3 34
#> 15        Metz 28  8 10 10 27 35  -8 34
#> 16       Dijon 28  7  9 12 27 37 -10 30
#> 17  St Etienne 28  8  6 14 29 45 -16 30
#> 18       Nimes 28  7  6 15 29 44 -15 27
#> 19      Amiens 28  4 11 13 31 50 -19 23
#> 20    Toulouse 28  3  4 21 22 58 -36 13

# The estimated team strengths
ratings<-team_ratings(results)$ratings
ratings
#>          teams    strengths
#> 1     Paris SG  0.854030618
#> 2         Lyon  0.281248927
#> 3       Rennes  0.235266949
#> 4    Marseille  0.185831707
#> 5        Lille  0.154852728
#> 6     Bordeaux  0.152263818
#> 7        Reims  0.076966355
#> 8         Nice  0.027839532
#> 9  Montpellier  0.023819729
#> 10      Monaco  0.010889382
#> 11  Strasbourg -0.006250803
#> 12      Nantes -0.020417435
#> 13       Brest -0.089217055
#> 14      Angers -0.096617968
#> 15        Metz -0.161858240
#> 16       Dijon -0.167749627
#> 17       Nimes -0.270650224
#> 18  St Etienne -0.285755708
#> 19      Amiens -0.316029198
#> 20    Toulouse -0.588463488

# The probabistic final standing
PFS_France<-simulate_league(results, S=10000)
PFS_France
#>              Pos.1  Pos.2  Pos.3  Pos.4  Pos.5  Pos.6  Pos.7  Pos.8  Pos.9
#> Paris SG    0.9999 0.0001 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000
#> Marseille   0.0001 0.7775 0.1767 0.0432 0.0025 0.0000 0.0000 0.0000 0.0000
#> Rennes      0.0000 0.1137 0.4009 0.3816 0.0746 0.0191 0.0065 0.0027 0.0007
#> Lille       0.0000 0.1071 0.3844 0.3960 0.0819 0.0199 0.0066 0.0028 0.0007
#> Lyon        0.0000 0.0014 0.0239 0.0932 0.3316 0.1922 0.1245 0.0819 0.0570
#> Reims       0.0000 0.0000 0.0041 0.0227 0.1165 0.1556 0.1527 0.1420 0.1253
#> Montpellier 0.0000 0.0001 0.0036 0.0223 0.1164 0.1347 0.1374 0.1240 0.1140
#> Bordeaux    0.0000 0.0001 0.0029 0.0102 0.0729 0.1205 0.1379 0.1286 0.1173
#> Nice        0.0000 0.0000 0.0007 0.0099 0.0571 0.0998 0.1136 0.1293 0.1299
#> Strasbourg  0.0000 0.0000 0.0010 0.0088 0.0513 0.0900 0.1055 0.1189 0.1193
#> Nantes      0.0000 0.0000 0.0004 0.0039 0.0419 0.0704 0.0881 0.0964 0.1133
#> Monaco      0.0000 0.0000 0.0008 0.0060 0.0346 0.0622 0.0762 0.0983 0.1154
#> Angers      0.0000 0.0000 0.0006 0.0021 0.0186 0.0333 0.0447 0.0634 0.0798
#> Metz        0.0000 0.0000 0.0000 0.0001 0.0000 0.0008 0.0041 0.0054 0.0131
#> Brest       0.0000 0.0000 0.0000 0.0000 0.0001 0.0015 0.0021 0.0055 0.0121
#> Dijon       0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0005 0.0012
#> St Etienne  0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0001 0.0002 0.0006
#> Nimes       0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0001 0.0003
#> Amiens      0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000
#> Toulouse    0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000
#>             Pos.10 Pos.11 Pos.12 Pos.13 Pos.14 Pos.15 Pos.16 Pos.17 Pos.18
#> Paris SG    0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000
#> Marseille   0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000
#> Rennes      0.0001 0.0001 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000
#> Lille       0.0004 0.0002 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000
#> Lyon        0.0439 0.0243 0.0155 0.0076 0.0027 0.0001 0.0002 0.0000 0.0000
#> Reims       0.0996 0.0751 0.0579 0.0343 0.0099 0.0038 0.0005 0.0000 0.0000
#> Montpellier 0.1062 0.0853 0.0727 0.0505 0.0240 0.0071 0.0015 0.0002 0.0000
#> Bordeaux    0.1144 0.0986 0.0844 0.0649 0.0322 0.0119 0.0026 0.0005 0.0001
#> Nice        0.1223 0.1247 0.0988 0.0727 0.0299 0.0092 0.0012 0.0009 0.0000
#> Strasbourg  0.1206 0.1142 0.1113 0.0853 0.0476 0.0191 0.0055 0.0011 0.0005
#> Nantes      0.1162 0.1300 0.1202 0.1186 0.0655 0.0239 0.0093 0.0015 0.0004
#> Monaco      0.1266 0.1377 0.1377 0.1146 0.0576 0.0231 0.0077 0.0015 0.0000
#> Angers      0.1089 0.1294 0.1600 0.1766 0.1119 0.0483 0.0183 0.0034 0.0007
#> Metz        0.0183 0.0361 0.0620 0.1152 0.2274 0.2280 0.1600 0.0926 0.0336
#> Brest       0.0166 0.0316 0.0538 0.0996 0.2035 0.2421 0.1846 0.1016 0.0411
#> Dijon       0.0035 0.0068 0.0142 0.0331 0.0956 0.1757 0.2452 0.2344 0.1501
#> St Etienne  0.0022 0.0050 0.0095 0.0207 0.0643 0.1436 0.2150 0.2708 0.2042
#> Nimes       0.0002 0.0009 0.0020 0.0061 0.0270 0.0565 0.1256 0.2252 0.3850
#> Amiens      0.0000 0.0000 0.0000 0.0002 0.0009 0.0076 0.0228 0.0662 0.1840
#> Toulouse    0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0001 0.0003
#>             Pos.19 Pos.20 exp_rank
#> Paris SG    0.0000 0.0000   1.0001
#> Marseille   0.0000 0.0000   2.2705
#> Rennes      0.0000 0.0000   3.5196
#> Lille       0.0000 0.0000   3.5614
#> Lyon        0.0000 0.0000   6.3318
#> Reims       0.0000 0.0000   8.1182
#> Montpellier 0.0000 0.0000   8.4693
#> Bordeaux    0.0000 0.0000   8.9533
#> Nice        0.0000 0.0000   9.2412
#> Strasbourg  0.0000 0.0000   9.5734
#> Nantes      0.0000 0.0000  10.0895
#> Monaco      0.0000 0.0000  10.1555
#> Angers      0.0000 0.0000  11.2238
#> Metz        0.0033 0.0000  14.4220
#> Brest       0.0042 0.0000  14.6120
#> Dijon       0.0396 0.0001  16.0634
#> St Etienne  0.0636 0.0002  16.4536
#> Nimes       0.1703 0.0008  17.3639
#> Amiens      0.7043 0.0140  18.5931
#> Toulouse    0.0147 0.9849  19.9844
```
