
<!-- README.md is generated from README.Rmd. Please edit that file -->

# PFSC

<!-- badges: start -->
<!-- badges: end -->

The PFSC package provides functions to simulate the remainder of
prematurely stopped soccer leagues. It calculates for each team the
probabilities to reach each position in the final league table.

## Installation

You can install this package from [GitHub](https://github.com/) with:

``` r
# install.packages("devtools")
devtools::install_github("vaneetvelde/PFSC")
```

## Example

We give the example of the stopped season in the French ligue in
2019-2020

``` r
library(PFSC)
results<-read.csv("https://www.football-data.co.uk/mmz4281/1920/F1.csv")
results<-results[,4:7]
colnames(results)<-c("home_team","away_team","home_score","away_score")

# The intermediate league table
table1<-league_table(results)
table1
#>           team  M  W  D  L GS GC  GD  P
#> 1     Paris SG 27 22  2  3 75 24  51 68
#> 2    Marseille 28 16  8  4 41 29  12 56
#> 3       Rennes 28 15  5  8 38 24  14 50
#> 4        Lille 28 15  4  9 35 27   8 49
#> 5        Reims 28 10 11  7 26 21   5 41
#> 6         Nice 28 11  8  9 41 38   3 41
#> 7         Lyon 28 11  7 10 42 27  15 40
#> 8  Montpellier 28 11  7 10 35 34   1 40
#> 9       Monaco 28 11  7 10 44 44   0 40
#> 10      Angers 28 11  6 11 28 33  -5 39
#> 11  Strasbourg 27 11  5 11 32 32   0 38
#> 12    Bordeaux 28  9 10  9 40 34   6 37
#> 13      Nantes 28 11  4 13 28 31  -3 37
#> 14       Brest 28  8 10 10 34 37  -3 34
#> 15        Metz 28  8 10 10 27 35  -8 34
#> 16       Dijon 28  7  9 12 27 37 -10 30
#> 17  St Etienne 28  8  6 14 29 45 -16 30
#> 18       Nimes 28  7  6 15 29 44 -15 27
#> 19      Amiens 28  4 11 13 31 50 -19 23
#> 20    Toulouse 28  3  4 21 22 58 -36 13

# The estimated team strengths
ratings<-team_ratings(results)$ratings
ratings
#>          teams    strengths
#> 1     Paris SG  0.854030618
#> 2         Lyon  0.281248927
#> 3       Rennes  0.235266949
#> 4    Marseille  0.185831707
#> 5        Lille  0.154852728
#> 6     Bordeaux  0.152263818
#> 7        Reims  0.076966355
#> 8         Nice  0.027839532
#> 9  Montpellier  0.023819729
#> 10      Monaco  0.010889382
#> 11  Strasbourg -0.006250803
#> 12      Nantes -0.020417435
#> 13       Brest -0.089217055
#> 14      Angers -0.096617968
#> 15        Metz -0.161858240
#> 16       Dijon -0.167749627
#> 17       Nimes -0.270650224
#> 18  St Etienne -0.285755708
#> 19      Amiens -0.316029198
#> 20    Toulouse -0.588463488

# The probabistic final standing
PFS_France<-simulate_league(results, S=10000)
PFS_France
#>             V1     V2     V3     V4     V5     V6     V7     V8     V9    V10
#> Paris SG     1 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000
#> Marseille    0 0.7819 0.1712 0.0448 0.0017 0.0004 0.0000 0.0000 0.0000 0.0000
#> Rennes       0 0.1098 0.4109 0.3730 0.0793 0.0182 0.0062 0.0017 0.0008 0.0000
#> Lille        0 0.1068 0.3828 0.4039 0.0755 0.0203 0.0066 0.0026 0.0009 0.0006
#> Lyon         0 0.0014 0.0225 0.0930 0.3324 0.1948 0.1203 0.0833 0.0561 0.0410
#> Reims        0 0.0000 0.0029 0.0219 0.1201 0.1560 0.1534 0.1365 0.1226 0.0990
#> Montpellier  0 0.0001 0.0035 0.0231 0.1201 0.1325 0.1359 0.1265 0.1174 0.1052
#> Bordeaux     0 0.0000 0.0020 0.0114 0.0741 0.1245 0.1300 0.1293 0.1219 0.1083
#> Nice         0 0.0000 0.0013 0.0096 0.0596 0.0998 0.1154 0.1230 0.1281 0.1295
#> Strasbourg   0 0.0000 0.0017 0.0083 0.0530 0.0892 0.1054 0.1196 0.1172 0.1222
#> Nantes       0 0.0000 0.0003 0.0036 0.0396 0.0661 0.0880 0.1013 0.1136 0.1191
#> Monaco       0 0.0000 0.0008 0.0062 0.0290 0.0636 0.0845 0.0962 0.1149 0.1238
#> Angers       0 0.0000 0.0001 0.0011 0.0154 0.0318 0.0479 0.0670 0.0828 0.1117
#> Metz         0 0.0000 0.0000 0.0001 0.0002 0.0012 0.0026 0.0062 0.0113 0.0180
#> Brest        0 0.0000 0.0000 0.0000 0.0000 0.0015 0.0031 0.0052 0.0104 0.0167
#> Dijon        0 0.0000 0.0000 0.0000 0.0000 0.0001 0.0004 0.0013 0.0016 0.0033
#> St Etienne   0 0.0000 0.0000 0.0000 0.0000 0.0000 0.0003 0.0003 0.0002 0.0013
#> Nimes        0 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0002 0.0003
#> Amiens       0 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000
#> Toulouse     0 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000
#>                V11    V12    V13    V14    V15    V16    V17    V18    V19
#> Paris SG    0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000
#> Marseille   0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000
#> Rennes      0.0001 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000
#> Lille       0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000
#> Lyon        0.0276 0.0161 0.0081 0.0025 0.0008 0.0001 0.0000 0.0000 0.0000
#> Reims       0.0807 0.0586 0.0329 0.0129 0.0022 0.0002 0.0001 0.0000 0.0000
#> Montpellier 0.0862 0.0696 0.0502 0.0215 0.0065 0.0015 0.0002 0.0000 0.0000
#> Bordeaux    0.1041 0.0886 0.0609 0.0310 0.0103 0.0030 0.0005 0.0001 0.0000
#> Nice        0.1142 0.0972 0.0726 0.0362 0.0105 0.0025 0.0004 0.0001 0.0000
#> Strasbourg  0.1143 0.1033 0.0908 0.0484 0.0192 0.0057 0.0015 0.0002 0.0000
#> Nantes      0.1316 0.1243 0.1160 0.0614 0.0246 0.0086 0.0015 0.0004 0.0000
#> Monaco      0.1313 0.1364 0.1180 0.0636 0.0232 0.0075 0.0007 0.0003 0.0000
#> Angers      0.1335 0.1578 0.1672 0.1074 0.0537 0.0179 0.0041 0.0006 0.0000
#> Metz        0.0369 0.0607 0.1101 0.2263 0.2286 0.1644 0.0947 0.0347 0.0040
#> Brest       0.0272 0.0570 0.1042 0.2047 0.2414 0.1825 0.1014 0.0400 0.0047
#> Dijon       0.0072 0.0185 0.0383 0.0923 0.1699 0.2369 0.2377 0.1505 0.0419
#> St Etienne  0.0046 0.0094 0.0244 0.0672 0.1387 0.2245 0.2635 0.2018 0.0637
#> Nimes       0.0005 0.0025 0.0059 0.0231 0.0633 0.1189 0.2231 0.3834 0.1776
#> Amiens      0.0000 0.0000 0.0004 0.0015 0.0071 0.0258 0.0706 0.1873 0.6961
#> Toulouse    0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0006 0.0120
#>                V20 exp_rank
#> Paris SG    0.0000   1.0000
#> Marseille   0.0000   2.2675
#> Rennes      0.0000   3.5153
#> Lille       0.0000   3.5580
#> Lyon        0.0000   6.3472
#> Reims       0.0000   8.1291
#> Montpellier 0.0000   8.4324
#> Bordeaux    0.0000   8.9404
#> Nice        0.0000   9.2581
#> Strasbourg  0.0000   9.5731
#> Nantes      0.0000  10.0958
#> Monaco      0.0000  10.1778
#> Angers      0.0000  11.2177
#> Metz        0.0000  14.4618
#> Brest       0.0000  14.6106
#> Dijon       0.0001  16.0394
#> St Etienne  0.0001  16.4374
#> Nimes       0.0012  17.3846
#> Amiens      0.0112  18.5670
#> Toulouse    0.9874  19.9868
```
