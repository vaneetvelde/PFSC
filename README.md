
<!-- README.md is generated from README.Rmd. Please edit that file -->

# PFSC

<!-- badges: start -->
<!-- badges: end -->

The PFSC package provides functions to simulate the remainder of
prematurely stopped soccer leagues. It calculates for each team the
probabilities to reach each position in the final league table.

## Installation

You can install this package from [GitHub](https://github.com/) with:

``` r
# install.packages("devtools")
devtools::install_github("vaneetvelde/PFSC")
```

## Example

We give the example of the stopped season of the French first ligue in
2019-2020.

``` r
library(PFSC)
results<-read.csv("https://www.football-data.co.uk/mmz4281/1920/F1.csv")
results<-results[,4:7]
colnames(results)<-c("home_team","away_team","home_score","away_score")

# The intermediate league table
table1<-league_table(results)
table1
#>           team  M  W  D  L GS GC  GD  P
#> 1     Paris SG 27 22  2  3 75 24  51 68
#> 2    Marseille 28 16  8  4 41 29  12 56
#> 3       Rennes 28 15  5  8 38 24  14 50
#> 4        Lille 28 15  4  9 35 27   8 49
#> 5        Reims 28 10 11  7 26 21   5 41
#> 6         Nice 28 11  8  9 41 38   3 41
#> 7         Lyon 28 11  7 10 42 27  15 40
#> 8  Montpellier 28 11  7 10 35 34   1 40
#> 9       Monaco 28 11  7 10 44 44   0 40
#> 10      Angers 28 11  6 11 28 33  -5 39
#> 11  Strasbourg 27 11  5 11 32 32   0 38
#> 12    Bordeaux 28  9 10  9 40 34   6 37
#> 13      Nantes 28 11  4 13 28 31  -3 37
#> 14       Brest 28  8 10 10 34 37  -3 34
#> 15        Metz 28  8 10 10 27 35  -8 34
#> 16       Dijon 28  7  9 12 27 37 -10 30
#> 17  St Etienne 28  8  6 14 29 45 -16 30
#> 18       Nimes 28  7  6 15 29 44 -15 27
#> 19      Amiens 28  4 11 13 31 50 -19 23
#> 20    Toulouse 28  3  4 21 22 58 -36 13

# The estimated team strengths
ratings<-team_ratings(results)$ratings
ratings
#>          teams    strengths
#> 1     Paris SG  0.854030618
#> 2         Lyon  0.281248927
#> 3       Rennes  0.235266949
#> 4    Marseille  0.185831707
#> 5        Lille  0.154852728
#> 6     Bordeaux  0.152263818
#> 7        Reims  0.076966355
#> 8         Nice  0.027839532
#> 9  Montpellier  0.023819729
#> 10      Monaco  0.010889382
#> 11  Strasbourg -0.006250803
#> 12      Nantes -0.020417435
#> 13       Brest -0.089217055
#> 14      Angers -0.096617968
#> 15        Metz -0.161858240
#> 16       Dijon -0.167749627
#> 17       Nimes -0.270650224
#> 18  St Etienne -0.285755708
#> 19      Amiens -0.316029198
#> 20    Toulouse -0.588463488

# The probabistic final standing
PFS_France<-simulate_league(results, S=10000)
PFS_France
#>              Pos.1  Pos.2  Pos.3  Pos.4  Pos.5  Pos.6  Pos.7  Pos.8  Pos.9
#> Paris SG    0.9999 0.0001 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000
#> Marseille   0.0001 0.7906 0.1663 0.0416 0.0012 0.0002 0.0000 0.0000 0.0000
#> Rennes      0.0000 0.1046 0.4114 0.3792 0.0768 0.0189 0.0063 0.0015 0.0009
#> Lille       0.0000 0.1029 0.3864 0.4033 0.0747 0.0208 0.0070 0.0028 0.0015
#> Lyon        0.0000 0.0015 0.0224 0.0919 0.3430 0.1911 0.1209 0.0808 0.0575
#> Reims       0.0000 0.0002 0.0037 0.0229 0.1170 0.1518 0.1558 0.1430 0.1243
#> Montpellier 0.0000 0.0000 0.0039 0.0203 0.1114 0.1365 0.1383 0.1311 0.1228
#> Bordeaux    0.0000 0.0001 0.0021 0.0129 0.0771 0.1237 0.1295 0.1251 0.1149
#> Nice        0.0000 0.0000 0.0011 0.0094 0.0544 0.1017 0.1213 0.1240 0.1268
#> Strasbourg  0.0000 0.0000 0.0015 0.0082 0.0532 0.0945 0.1043 0.1192 0.1202
#> Nantes      0.0000 0.0000 0.0002 0.0031 0.0412 0.0670 0.0859 0.1014 0.1141
#> Monaco      0.0000 0.0000 0.0008 0.0048 0.0349 0.0609 0.0753 0.0943 0.1119
#> Angers      0.0000 0.0000 0.0002 0.0024 0.0146 0.0304 0.0504 0.0641 0.0831
#> Metz        0.0000 0.0000 0.0000 0.0000 0.0003 0.0012 0.0020 0.0061 0.0102
#> Brest       0.0000 0.0000 0.0000 0.0000 0.0002 0.0013 0.0026 0.0059 0.0090
#> Dijon       0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0004 0.0003 0.0014
#> St Etienne  0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0004 0.0010
#> Nimes       0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0004
#> Amiens      0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000
#> Toulouse    0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000
#>             Pos.10 Pos.11 Pos.12 Pos.13 Pos.14 Pos.15 Pos.16 Pos.17 Pos.18
#> Paris SG    0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000
#> Marseille   0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000
#> Rennes      0.0003 0.0001 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000
#> Lille       0.0005 0.0001 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000
#> Lyon        0.0383 0.0238 0.0181 0.0075 0.0024 0.0007 0.0001 0.0000 0.0000
#> Reims       0.0989 0.0772 0.0569 0.0351 0.0101 0.0023 0.0006 0.0002 0.0000
#> Montpellier 0.1032 0.0874 0.0688 0.0474 0.0217 0.0052 0.0018 0.0002 0.0000
#> Bordeaux    0.1091 0.1056 0.0900 0.0674 0.0296 0.0094 0.0029 0.0003 0.0003
#> Nice        0.1245 0.1141 0.1003 0.0748 0.0349 0.0094 0.0029 0.0003 0.0001
#> Strasbourg  0.1212 0.1191 0.1010 0.0884 0.0459 0.0156 0.0063 0.0012 0.0002
#> Nantes      0.1172 0.1248 0.1318 0.1140 0.0640 0.0249 0.0080 0.0022 0.0002
#> Monaco      0.1293 0.1380 0.1377 0.1135 0.0664 0.0228 0.0080 0.0013 0.0001
#> Angers      0.1124 0.1325 0.1624 0.1733 0.1036 0.0493 0.0167 0.0041 0.0005
#> Metz        0.0192 0.0345 0.0592 0.1193 0.2254 0.2276 0.1698 0.0911 0.0310
#> Brest       0.0186 0.0290 0.0477 0.0957 0.2096 0.2443 0.1857 0.1008 0.0446
#> Dijon       0.0047 0.0086 0.0141 0.0339 0.0934 0.1775 0.2356 0.2420 0.1496
#> St Etienne  0.0019 0.0045 0.0102 0.0227 0.0681 0.1424 0.2189 0.2718 0.1912
#> Nimes       0.0007 0.0007 0.0018 0.0061 0.0234 0.0613 0.1192 0.2152 0.3882
#> Amiens      0.0000 0.0000 0.0000 0.0009 0.0015 0.0073 0.0235 0.0693 0.1935
#> Toulouse    0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0005
#>             Pos.19 Pos.20 exp_rank
#> Paris SG    0.0000 0.0000   1.0001
#> Marseille   0.0000 0.0000   2.2538
#> Rennes      0.0000 0.0000   3.5259
#> Lille       0.0000 0.0000   3.5675
#> Lyon        0.0000 0.0000   6.3148
#> Reims       0.0000 0.0000   8.1184
#> Montpellier 0.0000 0.0000   8.4402
#> Bordeaux    0.0000 0.0000   8.9483
#> Nice        0.0000 0.0000   9.2644
#> Strasbourg  0.0000 0.0000   9.5205
#> Nantes      0.0000 0.0000  10.1073
#> Monaco      0.0000 0.0000  10.2125
#> Angers      0.0000 0.0000  11.1981
#> Metz        0.0031 0.0000  14.4481
#> Brest       0.0050 0.0000  14.6582
#> Dijon       0.0384 0.0001  16.0474
#> St Etienne  0.0668 0.0001  16.4234
#> Nimes       0.1815 0.0015  17.3980
#> Amiens      0.6931 0.0109  18.5662
#> Toulouse    0.0121 0.9874  19.9869
```
